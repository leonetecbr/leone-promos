function ig_share(e){const t=$(e).find(".product-title").html(),n=$(e).find(".description").html(),o=$(e).find("del").html(),i=$(e).find(".discount").val();$("#product-title").html(t),$("#product-image").attr("src",$(e).find(".product-image").attr("src")),$("#product-image").attr("alt",t),void 0!==o?($("#product-price-from").html(o),$("#price-from").show()):$("#price-from").hide(),$("#installment").html($(e).find(".installment").html()),void 0!==n?($("#product-desc").html(n),$("#product-desc").show()):$("#product-desc").hide(),void 0!==i?$("#product-code").show():$("#product-code").hide(),$("#product-price-to").html($(e).find(".pricing-card-title").html()),$("#share-link").html(getUrl(e)),$("#ig-share").removeClass("d-none")}function getText(e){const t=$(e).find(".description").html();var n=$(e).find(".pricing-card-title").html();const o=$(e).find("del").html();return"Grátis"!==n&&(n="Por apenas: "+n),void 0!==o&&(n="De: "+o+"\n\n"+n),n=$(e).find(".product-title").html()+".\n\n"+n+"!",void 0!==t&&(n+="\n\n"+t),n}function getTextCupom(e){var t=$(e).find(".card-title").html()+" no(a) "+$(e).find(".loja-image").attr("alt");const n=$(e).find(".cupom-vigency").html();var o=$(e).find(".discount").val(),i=o.substr(0,o.length-2);return t+="\n\n"+n+"\n\n"+(o="Cupom: "+i.replace(/\w/g,"*")+o.substr(-2))}function getUrl(e){return"https://para.promo/o/"+e.replace("#","")}function getUrlCupom(e){return"https://para.promo/c/"+e.replace("#cupom_","")}function accept(){createCookie("accept","true",365),$("#aviso_cookie").fadeOut("slow")}function copy_s(e){navigator.clipboard?navigator.clipboard.writeText(e):($("#noeye").html('<textarea id="text_copy">'+e+"</textarea>"),$("#text_copy").select(),document.execCommand("copy"),$("#noeye").html("")),$("#copy_sucess").removeClass("d-none"),setTimeout((function(){$("#copy_sucess").addClass("d-none")}),3e3)}function copy(e,t){if(navigator.clipboard){const e=$(t).val();navigator.clipboard.writeText(e)}else $(t).attr("disabled",!1),$(t).select(),document.execCommand("copy"),$(t).attr("disabled",!0);window.open(e)}function submit(e){$("#checkbox").append('<input type="hidden" name="_token" id="token" value="'+csrf+'">'),$("#checkbox").submit()}function createCookie(e,t,n){var o;if(n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3),o="; expires="+i.toGMTString()}else o="";document.cookie=e+"="+t+o+" path=/"}function getPrefer(e){$.ajax({url:"/prefer/get",data:JSON.stringify({endpoint:e,_token:csrf}),dataType:"json",contentType:"application/json",type:"POST"}).done((function(e){if(e.success){var t=0;for(let n=0;n<e.pref.length;n++)e.pref[n]&&($("#p"+(n+1)).attr("checked",!0),t++);t==e.pref.length&&$("#all").attr("checked",!0),$("#preferencias").removeClass("d-none")}else null!=typeof e.message?alert(e.message):alert("Falha")})).fail((function(){alert("Falha")}))}function redirectUrl(){var e=$("#url").val();e=e.strstr("?"),window.open("/redirect?url="+e),$("#url").val("")}function pesquisar(e,t){$("body").append('<form method="post" action="/search/'+e+'" id="pesquisar"><input type="hidden" name="_token" value="'+csrf+'"/><input type="hidden" name="g-recaptcha-response" value="'+t+'"/></form>'),$("#pesquisar").submit()}function paginateSearch(e,t){$("body").append('<form method="post" action="'+e+'" id="pesquisar"><input type="hidden" name="_token" value="'+csrf+'"/><input type="hidden" name="g-recaptcha-response" value="'+t+'"/></form>'),$("#pesquisar").submit()}function getToken(e,t,n="ajax"){grecaptcha.ready((function(){grecaptcha.execute(KeyV3Recaptcha,{action:e}).then((function(e){"ajax"==n?sendForm(t,e):"search"==n?pesquisar(t,e):"paginate"==n&&paginateSearch(t,e)}))}))}String.prototype.strstr=function(e){var t=this.indexOf(e);return-1==t?this:this.substr(0,t)},$(document).ready((function(){$(".ajax-form").submit((function(e){this.checkValidity()?(e.preventDefault(),getToken("form-"+this.id,this)):(e.preventDefault(),e.stopPropagation()),this.classList.add("was-validated")})),$(".needs-validation").submit((function(e){if(!1===this.checkValidity())e.preventDefault(),e.stopPropagation(),$(this).addClass("was-validated");else{if(e.preventDefault(),$(this).addClass("was-validated"),"deeplink"==this.id)redirectUrl();else if("search"==this.id||"search-lg"==this.id){getToken("search","search"==this.id?$("#qs").val():$("#ql").val(),"search")}$(this).removeClass("was-validated")}})),navigator.share&&$(".plus-share").removeClass("d-none"),$(".igs").click((function(){alert("Tire print e compartilhe nas suas storys, para fechar dê um duplo clique!"),ig_share("#"+$(this).closest(".promo").attr("id"))})),$(".mre").click((function(){var e,t,n;void 0!==$(this).closest(".promo").attr("id")?(e=getText(t="#"+$(this).closest(".promo").attr("id"))+"\n",n=getUrl(t)):(e=getTextCupom(t="#"+$(this).closest(".cupom").attr("id"))+"\n",n=getUrlCupom(t)),navigator.share({text:e,url:n})})),$(".cpy").click((function(){var e,t,n;void 0!==$(this).closest(".promo").attr("id")?(e=getText(t="#"+$(this).closest(".promo").attr("id")),n=getUrl(t)):(e=getTextCupom(t="#"+$(this).closest(".cupom").attr("id")),n=getUrlCupom(t)),copy_s(e+="\n\n"+n)})),$(".wpp").click((function(){var e,t,n;void 0!==$(this).closest(".promo").attr("id")?(e=getText(t="#"+$(this).closest(".promo").attr("id")),n=getUrl(t)):(e=getTextCupom(t="#"+$(this).closest(".cupom").attr("id")),n=getUrlCupom(t)),e+="\n\n"+n,window.open("https://api.whatsapp.com/send?text="+encodeURIComponent(e))})),$(".tlg").click((function(){var e,t,n;void 0!==$(this).closest(".promo").attr("id")?(e="\n"+getText(t="#"+$(this).closest(".promo").attr("id")),n=getUrl(t)):(e="\n"+getTextCupom(t="#"+$(this).closest(".cupom").attr("id")),n=getUrlCupom(t)),window.open("https://telegram.me/share/url?url="+encodeURIComponent(n)+"&text="+encodeURIComponent(e))})),$(".twt").click((function(){var e,t,n;void 0!==$(this).closest(".promo").attr("id")?(e=getText(t="#"+$(this).closest(".promo").attr("id"))+"\n\n",n=getUrl(t)):(e=getTextCupom(t="#"+$(this).closest(".cupom").attr("id"))+"\n\n",n=getUrlCupom(t)),window.open("https://twitter.com/share?url="+encodeURIComponent(n)+"&text="+encodeURIComponent(e))})),$("#ig-share").dblclick((function(){$(this).addClass("d-none")}));var e=$("#cabecalho");$(window).scroll((function(){$(this).scrollTop()>90?(e.addClass("fixed-top"),e.addClass("shadow"),$("body").css("padding-top",90)):(e.removeClass("fixed-top"),e.removeClass("shadow"),$("body").css("padding-top",0))})),$(".ajax_form").submit((function(e){e.preventDefault(),form=this,grecaptcha.ready((function(){grecaptcha.execute(KeyV3Recaptcha,{action:"send_form"}).then((function(e){var t=new Object;for(var n of $(form).serializeArray())t[n.name]=n.value;t._token=csrf,t["g-recaptcha-response"]=e;let o=form.id,i=$("#"+o+"_submit").html(),s=$("#"+o+"_submit");s.attr("disabled",!0),s.html("Aguarde ..."),$.ajax({url:form.action,data:JSON.stringify(t),dataType:"json",contentType:"application/json",type:"POST"}).done((function(e){void 0===e.success||void 0===e.message?($("#error_"+o).html('<p class="erro mt-1">Erro desconhecido :(</p>'),$("#error_"+o).show("slow")):e.success?($("#error_"+o).html('<p class="bolder">'+e.message+"</p>"),$("#error_"+o).show("slow")):($("#error_"+o).html('<p class="erro mt-1">'+e.message+"</p>"),$("#error_"+o).show("slow"))})).fail((function(){$("#error_"+o).html('<p class="erro mt-1">Não foi possível enviar os dados, tente novamente!</p>'),$("#error_"+o).show("slow")})).always((function(){s.html(i),s.attr("disabled",!1)}))}))}))}));var t=!1;$("#btn-menu").click((function(){$("#menu").removeClass("d-none"),$("#menu").addClass("fixed-menu"),$("#close").removeClass("d-none")})),$("#btn-search").click((function(){!1===t?($("#search").removeClass("d-none"),$("#btn-search").html('<i class="fas fa-times"></i>'),$("html, body").animate({scrollTop:"80px"},800),t=!0):($("#search").addClass("d-none"),$("#btn-search").html('<i class="fas fa-search"></i>'),t=!1)})),$("#close").click((function(){$("#menu").addClass("d-none"),$("#close").addClass("d-none"),$("#menu").removeClass("fixed-menu")})),$("input").change((function(){$(this).css({border:"1px solid #fff"});var e=$(this).attr("id");$(".i"+e).fadeOut("slow")})),$("select").change((function(){$(this).css({border:"1px solid #fff"});var e=$(this).attr("id");$(".i"+e).fadeOut("slow")})),$("textarea").change((function(){$(this).css({border:"1px solid #fff"});var e=$(this).attr("id");$(".i"+e).fadeOut("slow")})),$("#inotify").click((function(){$("#notify").addClass("d-none"),createCookie("no_notify",1,60)})),0==window.location.pathname.indexOf("/search")&&$(".page-link").click((function(e){e.preventDefault(),getToken("paginate",$(this).attr("href"),"paginate")})),$("#prefers input[type='checkbox']").change((function(){$("#prefers input[type='checkbox']").is(":checked")?($("#para").attr("disabled",!0),$("#para").removeAttr("required")):($("#para").attr("disabled",!1),$("#para").attr("required"))})),$("#all").change((function(){$(this).is(":checked")?$(".prefer").attr("checked",!0):$(".prefer").removeAttr("checked")}))}));let sub,isSubscribed=!1,swRegistration=null,btn=$("#btn-notify");function urlB64ToUint8Array(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(t),o=new Uint8Array(n.length);for(let e=0;e<n.length;++e)o[e]=n.charCodeAt(e);return o}function initializeUI(){document.cookie.indexOf("no_notify")<0&&$("#notify").removeClass("d-none"),btn.attr("disabled",!1),btn.click((function(){btn.attr("disabled",!0),btn.html("Aguarde ..."),isSubscribed?unsubscribeUser():subscribeUser()})),swRegistration.pushManager.getSubscription().then((function(e){sub=e,isSubscribed=!(null===e),isSubscribed&&"/notificacoes"==window.location.pathname&&(getPrefer(e.endpoint),$("#endpoint").val(e.endpoint)),updateBtn()}))}function updateBtn(){if("denied"===Notification.permission)return $(".js-push-btn").html("Notificações bloqueadas"),$(".js-push-btn").attr("disabled",!0),void(sub&&update("remove"));btn.attr("disabled",!1),isSubscribed?(setTimeout((function(){createCookie("no_notify",1,60),$("#notify").hide("slow")}),1e3),btn.html("Desativar notificações")):btn.html("Ativar notificações")}function subscribeUser(){const e=urlB64ToUint8Array(applicationServerPublicKey);swRegistration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:e}).then((function(e){sub=e,update("add")})).catch((function(){updateBtn()}))}function unsubscribeUser(){sub?(sub.unsubscribe(),update("remove"),$("#preferencias").addClass("d-none")):updateBtn()}function update(e){grecaptcha.ready((function(){grecaptcha.execute("6LdiepQaAAAAAAzLXLD1le5GHf0JRShTQvNX2LHt",{action:"notify"}).then((function(t){const n={subscription:sub,action:e,token:t,_token:csrf};document.cookie="humans_21909=1",$.ajax({url:"/register",type:"POST",data:JSON.stringify(n),dataType:"json",contentType:"application/json",success:function(t){processResponse(t,e)}}).fail((function(){return $("#notify").append('<p class="erro mt-2 center">Erro desconhecido!</p>'),sub&&sub.unsubscribe(),updateBtn()}))}))}))}function processResponse(e,t){return void 0===e.success?($("#notify").append('<p class="erro mt-2 center">Erro desconhecido!</p>'),sub&&sub.unsubscribe()):e.success&&"add"==t?isSubscribed=!0:e.success&&"remove"==t?isSubscribed=!1:void 0!==e.erro?($("#notify").append('<p class="erro mt-2 center">'+e.erro+"</p>"),sub&&sub.unsubscribe()):($("#notify").append('<p class="erro mt-2 center">Erro desconhecido!</p>'),sub&&sub.unsubscribe()),updateBtn()}"serviceWorker"in navigator&&"PushManager"in window?navigator.serviceWorker.register("/sw.js").then((function(e){swRegistration=e,initializeUI()})):(btn.html("Notificações não suportadas"),$("#notify-unsupport").removeClass("d-none"));
